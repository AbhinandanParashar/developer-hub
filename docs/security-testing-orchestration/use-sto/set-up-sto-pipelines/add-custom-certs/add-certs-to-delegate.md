---
title: Add custom certificates to a delegate
description: How to add custom SSL certificates to Kubernetes and Docker delegates
sidebar_position: 20
---

Some organizations prefer to use custom SSL certificates instead of certificates generated by a public Certificate Authority (CA).  If your organization uses internal certificates, you need to set up Harness to use these certificates. 

Harness supports three workflows for using custom certificates. You can add your certs to the delegate, to individual pipelines, or to the container images you use to run your scans. 

## When to use this workflow

This workflow is recommended if ALL of the following are true:

- You're using a Kubernetes or Docker delegate.

- You can configure the delegate directly.

- Your pipeline doesn't require any additional files, such as license or context files, to run scans.

The [pipeline workflow](/docs/security-testing-orchestration/use-sto/set-up-sto-pipelines/add-custom-certs/add-certs-to-pipelines.md) is recommended if ANY of the following are true:

- You're using any delegate type other than Kubernetes or Docker, such as a Harness Cloud delegate.

- You cannot configure the delegate directly. 

- The external scanner requires additional files, such as context or license files, to run scans. 

## Important notes

- This workflow is supported for Kubernetes and Docker delegates only, and requires direct access to the delegate. If you don't meet these requirements, you can add your certs to [individual pipelines](/docs/security-testing-orchestration/use-sto/set-up-sto-pipelines/add-custom-certs/add-certs-to-pipelines) or to [custom scanner images](/docs/security-testing-orchestration/use-sto/set-up-sto-pipelines/use-private-registry-for-sto-scanner-images) instead.

- You must have **root access** to perform the [workflows](#workflow-descriptions) referenced below.

- Make sure that your certificates meet all requirements of the external scan tool. Your certificates must be valid, unexpired, and have a complete trust chain. 

- STO supports certificates in PEM and DER (Distinguished Encoding Rules) format.

- Harness STO does not support certificate bundles. Each certificate should be specified in its own file. If you have a bundle that you want to use with an external scanner, Harness recommends that you split the bundle into individual files.

- To troubleshoot SSL issues, go to [Troubleshooting tips](#troubleshooting-tips) below. 


### Workflow descriptions

The Harness CI docs describe how to add custom certificates to a delegate.

- For Kubernetes delegates, go to [Configure a Kubernetes build farm to use self-signed certificates](/docs/continuous-integration/use-ci/set-up-build-infrastructure/k8s-build-infrastructure/configure-a-kubernetes-build-farm-to-use-self-signed-certificates).

- For Docker delegates, go to [Set up a local runner build infrastructure](/docs/continuous-integration/use-ci/set-up-build-infrastructure/define-a-docker-build-infrastructure/#install-the-delegate-and-runner).
  

